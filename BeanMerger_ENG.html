<div id="bmg-wrapper">
  
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Nunito:wght@400;700&display=swap" rel="stylesheet">

  <style>
    #bmg-wrapper {
      --bmg-primary: #4a7a5f;
      --bmg-secondary: #a4d4a5;
      --bmg-bg: #fdfaf3;
      --bmg-bean-grad: radial-gradient(circle at 30% 30%, #ffdb99, #e0a846);
      --bmg-bean-border: #8c6028;
      --bmg-zero-grad: radial-gradient(circle at 30% 30%, #55efc4, #00b894);
      --bmg-zero-border: #006266;
      
      font-family: 'Nunito', sans-serif;
      background-color: #eef5e6;
      background-image: radial-gradient(#d4eac8 10%, transparent 10%);
      background-size: 20px 20px;
      color: #3d352e;
      padding: 20px;
      border-radius: 15px;
      max-width: 650px;
      margin: 20px auto;
      position: relative;
      box-sizing: border-box;
      line-height: 1.5;
    }

    #bmg-wrapper * {
      box-sizing: border-box;
    }

    #bmg-wrapper .bmg-card {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 8px 0px rgba(74, 122, 95, 0.2), 0 20px 30px rgba(0,0,0,0.1);
      overflow: hidden;
      border: 4px solid #fff;
    }

    #bmg-wrapper .bmg-header {
      background: var(--bmg-primary);
      color: white;
      padding: 20px;
      text-align: center;
      border-bottom: 5px solid #3a634b;
    }
    
    #bmg-wrapper h2.bmg-title {
      font-family: 'Fredoka', sans-serif;
      margin: 0;
      font-size: 2em;
      color: white;
      text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
      line-height: 1.2;
    }

    #bmg-wrapper .jackpot-badge {
      background: rgba(0, 0, 0, 0.25);
      display: inline-block;
      padding: 8px 20px;
      border-radius: 50px;
      margin-top: 10px;
      font-family: 'Fredoka', sans-serif;
      font-size: 1.2em;
      border: 2px solid rgba(255,255,255,0.3);
      color: #fff;
    }

    #bmg-wrapper .bmg-content {
      padding: 20px;
    }

    #bmg-wrapper .bmg-beans-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      padding: 20px 10px;
      min-height: 120px;
      background: #f4f9f0;
      border-radius: 15px;
      border: 2px dashed #cce5cc;
      margin-bottom: 20px;
    }

    #bmg-wrapper .bmg-bean {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 75px;
      height: 75px;
      background: var(--bmg-bean-grad);
      border: 3px solid var(--bmg-bean-border);
      border-radius: 50%;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 4px 0 var(--bmg-bean-border);
      transition: all 0.15s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      font-family: 'Fredoka', sans-serif;
      margin: 0;
    }

    #bmg-wrapper .bmg-bean.is-zero {
        background: var(--bmg-zero-grad);
        border-color: var(--bmg-zero-border);
        box-shadow: 0 4px 0 var(--bmg-zero-border);
    }
    
    #bmg-wrapper .bmg-bean span.num {
      font-size: 2em;
      font-weight: 600;
      color: #5a3d2b;
      line-height: 1;
    }
    #bmg-wrapper .bmg-bean.is-zero span.num { color: #fff; }
    
    #bmg-wrapper .bmg-bean:hover { transform: translateY(-4px); }
    
    #bmg-wrapper .bmg-bean.bmg-selected {
      background: radial-gradient(circle at 30% 30%, #a4d4a5, #5a8a6f);
      border-color: #2e5c43;
      box-shadow: 0 0 0 4px #cce5cc, 0 4px 0 #2e5c43;
      transform: scale(1.1);
      z-index: 10;
    }
    
    #bmg-wrapper .bmg-bean.bmg-new {
      animation: bmg_pop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    #bmg-wrapper .bmg-controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 20px;
    }
    @media (min-width: 500px) {
      #bmg-wrapper .bmg-controls { grid-template-columns: repeat(4, 1fr); }
    }

    #bmg-wrapper .bmg-btn {
      border: none;
      padding: 12px;
      font-family: 'Fredoka', sans-serif;
      font-size: 1.1em;
      border-radius: 12px;
      cursor: pointer;
      transition: transform 0.1s, background 0.2s;
      color: white;
      box-shadow: 0 4px 0 rgba(0,0,0,0.15);
      background: #5a8a6f;
      text-transform: none;
      font-weight: normal;
      line-height: normal;
      margin: 0;
      width: 100%;
    }

    #bmg-wrapper .bmg-btn:hover:not(:disabled) { background: #4a7a5f; }
    #bmg-wrapper .bmg-btn:active { transform: translateY(4px); box-shadow: none; }
    
    #bmg-wrapper .bmg-btn:disabled { 
        background: #d0d0d0 !important; 
        color: #999 !important; 
        cursor: not-allowed; 
        box-shadow: none; 
        transform: none; 
    }

    #bmg-wrapper .bmg-btn-start {
      background: #ff6b6b;
      margin: 0 auto 20px;
      display: block;
      width: 100%;
    }
    #bmg-wrapper .bmg-btn-start:hover { background: #ee5253; }

    #bmg-wrapper .bmg-panel {
      background: #f9f9f9;
      border-radius: 12px;
      padding: 15px;
      margin-top: 20px;
      border: 1px solid #eee;
      text-align: left;
    }
    #bmg-wrapper .bmg-panel h3 { 
        margin-top: 0; 
        color: #5a8a6f; 
        font-family: 'Fredoka', sans-serif;
        font-size: 1.2em;
    }

    #bmg-wrapper .bmg-log-list {
      height: 100px;
      overflow-y: auto;
      font-size: 0.9em;
      color: #555;
    }
    #bmg-wrapper .bmg-log-entry { margin-bottom: 6px; padding-left: 15px; position: relative; }
    #bmg-wrapper .bmg-log-entry::before { content: ''; position: absolute; left: 0; font-size: 0.8em;}

    #bmg-wrapper .bmg-modal-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255, 255, 255, 0.95);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 50;
      opacity: 0;
      visibility: hidden;
      transition: 0.3s;
      backdrop-filter: blur(2px);
      border-radius: 15px;
    }
    #bmg-wrapper .bmg-modal-overlay.show { opacity: 1; visibility: visible; }
    
    #bmg-wrapper .bmg-modal-box {
      text-align: center;
      animation: bmg_pop 0.6s ease;
      padding: 20px;
      background: #fff;
      border-radius: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.15);
      border: 5px solid #eee;
      width: 80%;
    }

    #bmg-wrapper .bmg-result-circle {
      width: 80px; height: 80px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 15px auto;
      font-size: 2em;
      color: #fff;
      text-shadow: 2px 2px 0 rgba(0,0,0,0.2);
      animation: bmg_float 3s infinite ease-in-out;
      font-family: 'Fredoka', sans-serif;
    }

    @keyframes bmg_pop {
      0% { transform: scale(0.5); opacity: 0; }
      70% { transform: scale(1.2); }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes bmg_shake {
      0% { transform: translate(1px, 1px) rotate(0deg); }
      20% { transform: translate(-3px, 0px) rotate(1deg); }
      40% { transform: translate(1px, -1px) rotate(1deg); }
      60% { transform: translate(-3px, 1px) rotate(0deg); }
      80% { transform: translate(-1px, -1px) rotate(1deg); }
      100% { transform: translate(1px, -2px) rotate(-1deg); }
    }
    @keyframes bmg_float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-5px); }
    }
    @keyframes bmg_fall { to { transform: translateY(600px) rotate(720deg); } }

    .bmg-shake-anim { animation: bmg_shake 0.5s; }
    
    #bmg-wrapper .bmg-confetti {
      position: absolute;
      width: 10px; height: 10px;
      background-color: #f00;
      animation: bmg_fall linear forwards;
      z-index: 60;
      top: -10px;
    }
  </style>

  <div class="bmg-card">
    <div class="bmg-header">
      <h2 class="bmg-title">BeanMerger: Zero Hero</h2>
      <div class="jackpot-badge">üèÜ Score: <span id="bmg-jackpot">0</span></div>
      <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 0.9em; color: white;">Goal: Create ONE bean with the value 0!</p>
    </div>

    <div class="bmg-content">
      <button onclick="bmgGame.start()" class="bmg-btn bmg-btn-start">Start New Round</button>

      <div id="bmg-beans-area" class="bmg-beans-container"></div>
      
      <div class="bmg-controls">
        <button onclick="bmgGame.calc('+')" class="bmg-btn bmg-op-btn" id="bmg-btn-add">‚ûï Grow</button>
        <button onclick="bmgGame.calc('-')" class="bmg-btn bmg-op-btn" id="bmg-btn-sub">‚ûñ Shrink</button>
        <button onclick="bmgGame.calc('*')" class="bmg-btn bmg-op-btn" id="bmg-btn-mul">‚úñÔ∏è Multiply</button>
        <button onclick="bmgGame.calc('/')" class="bmg-btn bmg-op-btn" id="bmg-btn-div">‚ûó Split</button>
      </div>

      <div class="bmg-panel">
        <h3>Gardener's Log</h3>
        <div id="bmg-log-area" class="bmg-log-list"></div>
      </div>
    </div>
    
    <div id="bmg-modal" class="bmg-modal-overlay">
        <div class="bmg-modal-box" id="bmg-modal-box">
          <h2 id="bmg-modal-title" class="bmg-title" style="color:#333; font-size:1.8em;">TITLE</h2>
          <p id="bmg-modal-msg" style="margin: 10px 0;">Message</p>
          <div class="bmg-result-circle" id="bmg-modal-score">0</div>
          <button onclick="bmgGame.start()" class="bmg-btn" style="background: #4a7a5f; margin-top: 10px;">Play Again</button>
        </div>
    </div>
  </div>

  <script>
  const bmgGame = {
      beans: [],
      selected: [],
      jackpot: 0,
      wrapper: document.getElementById('bmg-wrapper'),
      
      start: function() {
          document.getElementById('bmg-modal').classList.remove('show');
          
          this.beans = Array.from({ length: 5 }, () => Math.floor(Math.random() * 10) + 1);
          
          this.jackpot = this.beans.reduce((a, b) => a + b, 0);
          document.getElementById('bmg-jackpot').innerText = this.jackpot;
  
          this.selected = [];
          this.render();
          this.log("Mission started! Grab the jackpot of " + this.jackpot, true);
      },
  
      render: function(newIdx = -1) {
          const container = document.getElementById("bmg-beans-area");
          container.innerHTML = "";
          
          this.beans.forEach((num, i) => {
              const btn = document.createElement("div");
              let cssClass = "bmg-bean ";
              if (this.selected.includes(i)) cssClass += "bmg-selected ";
              if (num === 0) cssClass += "is-zero ";
              if (i === newIdx) cssClass += "bmg-new ";
              
              btn.className = cssClass;
              
              btn.innerHTML = `<span class="num">${num}</span>`;
              btn.onclick = () => this.toggle(i);
              container.appendChild(btn);
          });
          this.updateButtons();
      },
  
      toggle: function(idx) {
          if (this.selected.includes(idx)) {
              this.selected = this.selected.filter(i => i !== idx);
          } else {
              if (this.selected.length < 2) this.selected.push(idx);
          }
          this.render();
      },
  
      updateButtons: function() {
          const active = this.selected.length === 2;
          this.wrapper.querySelectorAll('.bmg-op-btn').forEach(b => b.disabled = !active);
      },
  
      calc: function(op) {
          if (this.selected.length !== 2) return;
          
          const [i1, i2] = this.selected;
          const v1 = this.beans[i1];
          const v2 = this.beans[i2];
          let res = 0;
          let symbol = "";
  
          if (op === '+') { res = v1 + v2; symbol = "+"; }
          if (op === '*') { res = v1 * v2; symbol = "√ó"; }
          if (op === '/') {
              if (v2 === 0 || v1 % v2 !== 0) {
                  this.log(`‚ö†Ô∏è Doesn't split evenly! ${v1} √∑ ${v2} has a remainder.`);
                  this.shake();
                  return;
              }
              res = v1 / v2;
              symbol = "√∑";
          }
          if (op === '-') { 
              res = v1 - v2; 
              symbol = "-";
              if (res < 0) {
                   this.log(`‚ö†Ô∏è Result would be below zero (${res}). Not allowed!`);
                   this.shake();
                   return;
              }
          }
  
          if (res > 1000) {
              this.log(`‚ö†Ô∏è Too big! The result ${res} bursts the garden.`);
              this.shake();
              return;
          }
  
          this.log(`${v1} ${symbol} ${v2} = ${res}`);
          
          const newBeans = this.beans.filter((_, idx) => !this.selected.includes(idx));
          newBeans.push(res);
          this.beans = newBeans;
          this.selected = [];
          
          this.shake();
          this.render(this.beans.length - 1);
          
          if (this.beans.length === 1) {
              setTimeout(() => this.checkEnd(res), 600);
          }
      },
  
      checkEnd: function(finalVal) {
          const modal = document.getElementById('bmg-modal');
          const title = document.getElementById('bmg-modal-title');
          const msg = document.getElementById('bmg-modal-msg');
          const score = document.getElementById('bmg-modal-score');
          const box = document.getElementById('bmg-modal-box');
  
          modal.classList.add('show');
  
          if (finalVal === 0) {
              title.innerText = "üèÜ SAFE CRACKED!";
              title.style.color = "#4a7a5f";
              msg.innerHTML = `Awesome! You reached <b>0</b>.<br>The Jackpot is yours!`;
              score.innerText = this.jackpot;
              score.style.background = "#ffd700";
              box.style.borderColor = "#ffd700";
              this.confetti();
              this.log("üèÜ Jackpot won! Fantastic!");
          } else {
              title.innerText = "‚ùå SO CLOSE!";
              title.style.color = "#d63031";
              msg.innerHTML = `There is still a <b>${finalVal}</b> left.<br>The goal is exactly <b>0</b>!`;
              score.innerText = finalVal;
              score.style.background = "#b2bec3";
              box.style.borderColor = "#d63031";
              this.log("‚ùå Too bad, that wasn't a zero.");
          }
      },
  
      log: function(msg, clear=false) {
          const logDiv = document.getElementById("bmg-log-area");
          if(clear) logDiv.innerHTML = "";
          const entry = document.createElement("div");
          entry.className = "bmg-log-entry";
          entry.innerHTML = msg;
          logDiv.prepend(entry);
      },
  
      shake: function() {
          const card = this.wrapper.querySelector('.bmg-card');
          card.classList.remove('bmg-shake-anim');
          void card.offsetWidth; 
          card.classList.add('bmg-shake-anim');
      },
      
      confetti: function() {
          const colors = ['#ff7675', '#74b9ff', '#55efc4', '#ffeaa7', '#a29bfe'];
          for(let i=0; i<60; i++) {
              const c = document.createElement('div');
              c.className = 'bmg-confetti';
              c.style.left = Math.random() * 90 + 5 + '%'; 
              c.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
              c.style.animationDuration = (Math.random() * 2 + 1.5) + 's';
              this.wrapper.appendChild(c);
              setTimeout(() => c.remove(), 3500);
          }
      }
  };
  
  document.addEventListener('DOMContentLoaded', () => {
      if(document.getElementById('bmg-wrapper')) {
          bmgGame.start();
      }
  });
  </script>
</div>
